!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(){this.create=function(){return new Float32Array(16)},this.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},this.multiply=function(t,e,r){var n=t[0],a=t[1],i=t[2],o=t[3],u=t[4],s=t[5],h=t[6],c=t[7],f=t[8],l=t[9],d=t[10],p=t[11],v=t[12],M=t[13],m=t[14],E=t[15],g=e[0],y=e[1],A=e[2],w=e[3],R=e[4],_=e[5],b=e[6],S=e[7],T=e[8],I=e[9],F=e[10],L=e[11],P=e[12],B=e[13],x=e[14],U=e[15];return r[0]=g*n+y*u+A*f+w*v,r[1]=g*a+y*s+A*l+w*M,r[2]=g*i+y*h+A*d+w*m,r[3]=g*o+y*c+A*p+w*E,r[4]=R*n+_*u+b*f+S*v,r[5]=R*a+_*s+b*l+S*M,r[6]=R*i+_*h+b*d+S*m,r[7]=R*o+_*c+b*p+S*E,r[8]=T*n+I*u+F*f+L*v,r[9]=T*a+I*s+F*l+L*M,r[10]=T*i+I*h+F*d+L*m,r[11]=T*o+I*c+F*p+L*E,r[12]=P*n+B*u+x*f+U*v,r[13]=P*a+B*s+x*l+U*M,r[14]=P*i+B*h+x*d+U*m,r[15]=P*o+B*c+x*p+U*E,r},this.scale=function(t,e,r){return r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[0],r[3]=t[3]*e[0],r[4]=t[4]*e[1],r[5]=t[5]*e[1],r[6]=t[6]*e[1],r[7]=t[7]*e[1],r[8]=t[8]*e[2],r[9]=t[9]*e[2],r[10]=t[10]*e[2],r[11]=t[11]*e[2],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},this.translate=function(t,e,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],r[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],r[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],r[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],r},this.rotate=function(t,e,r,n){var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!a)return null;var i=r[0],o=r[1],u=r[2];1!=a&&(i*=a=1/a,o*=a,u*=a);var s=Math.sin(e),h=Math.cos(e),c=1-h,f=t[0],l=t[1],d=t[2],p=t[3],v=t[4],M=t[5],m=t[6],E=t[7],g=t[8],y=t[9],A=t[10],w=t[11],R=i*i*c+h,_=o*i*c+u*s,b=u*i*c-o*s,S=i*o*c-u*s,T=o*o*c+h,I=u*o*c+i*s,F=i*u*c+o*s,L=o*u*c-i*s,P=u*u*c+h;return e?t!=n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=f*R+v*_+g*b,n[1]=l*R+M*_+y*b,n[2]=d*R+m*_+A*b,n[3]=p*R+E*_+w*b,n[4]=f*S+v*T+g*I,n[5]=l*S+M*T+y*I,n[6]=d*S+m*T+A*I,n[7]=p*S+E*T+w*I,n[8]=f*F+v*L+g*P,n[9]=l*F+M*L+y*P,n[10]=d*F+m*L+A*P,n[11]=p*F+E*L+w*P,n},this.lookAt=function(t,e,r,n){var a,i,o,u,s,h,c,f,l,d,p=t[0],v=t[1],M=t[2],m=r[0],E=r[1],g=r[2],y=e[0],A=e[1],w=e[2];return p==y&&v==A&&M==w?this.identity(n):(c=p-e[0],f=v-e[1],l=M-e[2],a=E*(l*=d=1/Math.sqrt(c*c+f*f+l*l))-g*(f*=d),i=g*(c*=d)-m*l,o=m*f-E*c,(d=Math.sqrt(a*a+i*i+o*o))?(a*=d=1/d,i*=d,o*=d):(a=0,i=0,o=0),u=f*o-l*i,s=l*a-c*o,h=c*i-f*a,(d=Math.sqrt(u*u+s*s+h*h))?(u*=d=1/d,s*=d,h*=d):(u=0,s=0,h=0),n[0]=a,n[1]=u,n[2]=c,n[3]=0,n[4]=i,n[5]=s,n[6]=f,n[7]=0,n[8]=o,n[9]=h,n[10]=l,n[11]=0,n[12]=-(a*p+i*v+o*M),n[13]=-(u*p+s*v+h*M),n[14]=-(c*p+f*v+l*M),n[15]=1,n)},this.perspective=function(t,e,r,n,a){var i=r*Math.tan(t*Math.PI/360),o=2*(i*e),u=2*i,s=n-r;return a[0]=2*r/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*r/u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-(n+r)/s,a[11]=-1,a[12]=0,a[13]=0,a[14]=-n*r*2/s,a[15]=0,a},this.ortho=function(t,e,r,n,a,i,o){var u=e-t,s=r-n,h=i-a;return o[0]=2/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2/h,o[11]=0,o[12]=-(t+e)/u,o[13]=-(r+n)/s,o[14]=-(i+a)/h,o[15]=1,o},this.transpose=function(t,e){return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},this.inverse=function(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],h=t[7],c=t[8],f=t[9],l=t[10],d=t[11],p=t[12],v=t[13],M=t[14],m=t[15],E=r*u-n*o,g=r*s-a*o,y=r*h-i*o,A=n*s-a*u,w=n*h-i*u,R=a*h-i*s,_=c*v-f*p,b=c*M-l*p,S=c*m-d*p,T=f*M-l*v,I=f*m-d*v,F=l*m-d*M,L=1/(E*F-g*I+y*T+A*S-w*b+R*_);return e[0]=(u*F-s*I+h*T)*L,e[1]=(-n*F+a*I-i*T)*L,e[2]=(v*R-M*w+m*A)*L,e[3]=(-f*R+l*w-d*A)*L,e[4]=(-o*F+s*S-h*b)*L,e[5]=(r*F-a*S+i*b)*L,e[6]=(-p*R+M*y-m*g)*L,e[7]=(c*R-l*y+d*g)*L,e[8]=(o*I-u*S+h*_)*L,e[9]=(-r*I+n*S-i*_)*L,e[10]=(p*w-v*y+m*E)*L,e[11]=(-c*w+f*y-d*E)*L,e[12]=(-o*T+u*b-s*_)*L,e[13]=(r*T-n*b+a*_)*L,e[14]=(-p*A+v*g-M*E)*L,e[15]=(c*A-f*g+l*E)*L,e}}var a,i,o,u,s;r.r(e);var h,c,f,l,d,p,v,M,m,E,g,y,A,w,R,_=[],b=[],S=[],T=[],I=[],F=[],L=[],P=[],B=[],x=12.5,U=[0,0,x],D=[0,0,0],O=[0,1,0],C=[0,0,x],N=[0,1,0],Y=0,q=0,H=0,V=!1,j=[],k=[],G=new function(){this.create=function(){return new Float32Array(4)},this.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},this.inverse=function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},this.normalize=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=Math.sqrt(e*e+r*r+n*n+a*a);return 0===i?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):(i=1/i,t[0]=e*i,t[1]=r*i,t[2]=n*i,t[3]=a*i),t},this.multiply=function(t,e,r){var n=t[0],a=t[1],i=t[2],o=t[3],u=e[0],s=e[1],h=e[2],c=e[3];return r[0]=n*c+o*u+a*h-i*s,r[1]=a*c+o*s+i*u-n*h,r[2]=i*c+o*h+n*s-a*u,r[3]=o*c-n*u-a*s-i*h,r},this.rotate=function(t,e,r){var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(!n)return null;var a=e[0],i=e[1],o=e[2];1!=n&&(a*=n=1/n,i*=n,o*=n);var u=Math.sin(.5*t);return r[0]=a*u,r[1]=i*u,r[2]=o*u,r[3]=Math.cos(.5*t),r},this.toVecIII=function(t,e,r){var n=this.create(),a=this.create(),i=this.create();return this.inverse(e,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],this.multiply(i,n,a),this.multiply(a,e,i),r[0]=i[0],r[1]=i[1],r[2]=i[2],r},this.toMatIV=function(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,u=n+n,s=a+a,h=r*o,c=r*u,f=r*s,l=n*u,d=n*s,p=a*s,v=i*o,M=i*u,m=i*s;return e[0]=1-(l+p),e[1]=c-m,e[2]=f+M,e[3]=0,e[4]=c+m,e[5]=1-(h+p),e[6]=d-v,e[7]=0,e[8]=f-M,e[9]=d+v,e[10]=1-(h+l),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},this.slerp=function(t,e,r,n){var a=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],i=1-a*a;if(i<=0)n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3];else if(i=Math.sqrt(i),Math.abs(i)<1e-4)n[0]=.5*t[0]+.5*e[0],n[1]=.5*t[1]+.5*e[1],n[2]=.5*t[2]+.5*e[2],n[3]=.5*t[3]+.5*e[3];else{var o=Math.acos(a),u=o*r,s=Math.sin(o-u)/i,h=Math.sin(u)/i;n[0]=t[0]*s+e[0]*h,n[1]=t[1]*s+e[1]*h,n[2]=t[2]*s+e[2]*h,n[3]=t[3]*s+e[3]*h}return n}},X=G.identity(G.create()),W=G.identity(G.create()),K=G.identity(G.create());!function(){window.addEventListener("load",function(){i=document.getElementById("webgl_canvas"),a=i.getContext("webgl"),window.addEventListener("keydown",function(t){"Escape"!==t.key},!1),i.width=o=window.innerWidth,i.height=u=window.innerHeight,i.addEventListener("mousedown",ot,!1),i.addEventListener("mousemove",ut,!1),i.addEventListener("mouseup",st,!1),i.addEventListener("wheel",ht,!1),t()},!1);var t=function(){_=z("./assets/shader/main.vert","./assets/shader/main.frag"),s=J(_[0],_[1]),Q(s,"a",[["aPosition","aColor","aNormal"],[3,4,3]],b,S),Q(s,"u",[["uMatrixMVP","uMatrixNormal"],["matrix4fv","matrix4fv"]],T),e()},e=function(){I.push(0,1,0),I.push(0,-1,0),F.push(0,.75,.65,1),F.push(0,.75,.65,1),function(){for(var t=11.25*Math.PI/180,e=0;e<32;++e){var r=t*e,n=Math.sin(r),a=Math.cos(r);I.push(1*n,1,1*a),I.push(1*n,1,1*a),F.push(0,.75,.65,1),F.push(0,.75,.65,1),31===e?P.push(0,2*e+2,2):P.push(0,2*e+2,2*e+4)}for(var i=0;i<32;++i){var o=t*i,u=Math.sin(o),s=Math.cos(o);I.push(1*u,-1,1*s),I.push(1*u,-1,1*s),F.push(0,.75,.65,1),F.push(0,.75,.65,1),0===i?P.push(1,64+2*i+2,128):P.push(1,64+2*i+2,64+2*i)}for(var h=0;h<32;++h){var c=2*h+3;0===h?P.push(c,129,c+64):P.push(c,c+64-2,c+64)}for(var f=0;f<32;++f){var l=2*f+3;31===f?P.push(l,l+64,3):P.push(l,l+64,l+2)}}(),function(){for(var t=0;t<P.length/3;t++){var e=[],r=et(I,P[0+3*t],P[1+3*t],P[2+3*t]),n=r[0],a=r[1],i=r[2];e=at(rt(n,a),rt(i,a)),e=it(e,nt(e)),B.push(e[0]),B.push(e[1]),B.push(e[2])}}(),function(){for(var t=0;t<I.length/3;t++){for(var e=[0,0,0],r=0;r<P.length;r++)P[r]==t&&(r%3==0?(e[0]+=B[r],e[1]+=B[r+1],e[2]+=B[r+2]):r%3==1?(e[0]+=B[r-1],e[1]+=B[r],e[2]+=B[r+1]):(e[0]+=B[r-2],e[1]+=B[r-1],e[2]+=B[r]));e=it(e,nt(e)),L.push(-1*e[0]),L.push(-1*e[1]),L.push(-1*e[2])}}(),h=$(I),c=$(F),f=$(L),d=[h,c,f],p=tt(P),l=P.length,m=new n,E=m.identity(m.create()),g=m.identity(m.create()),y=m.identity(m.create()),A=m.identity(m.create()),w=m.identity(m.create()),R=m.identity(m.create()),a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.cullFace(a.BACK),v=Date.now(),M=0,r()},r=function t(){Z(d,b,S),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,p),i.width=o=window.innerWidth,i.height=u=window.innerHeight,a.viewport(0,0,o,u),a.clearColor(0,0,0,1),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);var e=o/u;ct(),m.lookAt(U,D,O,g),m.perspective(45,e,.1,2*x,y),m.multiply(y,g,A),M=(Date.now()-v)/1e3,m.identity(E),m.rotate(E,.75*M,[0,-1,-1],E),m.multiply(A,E,w),m.transpose(E,R),m.inverse(R,R),a.uniformMatrix4fv(T[0],!1,w),a.uniformMatrix4fv(T[1],!1,R),a.drawElements(a.TRIANGLES,l,a.UNSIGNED_SHORT,0),requestAnimationFrame(t)}}();var z=function(t,e){var r,n,i=new XMLHttpRequest,o=[],u=a.createShader(a.VERTEX_SHADER),s=a.createShader(a.FRAGMENT_SHADER);if(i.open("GET",t,!1),i.onload=function(){r=i.responseText},i.send(),i.open("GET",e,!1),i.onload=function(){n=i.responseText},i.send(),a.shaderSource(u,r),a.compileShader(u),o.push(u),a.shaderSource(s,n),a.compileShader(s),o.push(s),a.getShaderParameter(u,a.COMPILE_STATUS)&&a.getShaderParameter(s,a.COMPILE_STATUS))return o;console.log(a.getShaderInfoLog(u)),console.log(a.getShaderInfoLog(s))},J=function(t,e){var r=a.createProgram();return a.attachShader(r,t),a.attachShader(r,e),a.linkProgram(r),a.getProgramParameter(r,a.LINK_STATUS)?(a.useProgram(r),r):null},Q=function(t,e,r,n,i){switch(e){case"a":for(var o=0;o<r[0].length;++o)n[o]=a.getAttribLocation(t,r[0][o]),i[o]=r[1][o];break;case"u":for(var u=0;u<r[0].length;++u)n[u]=a.getUniformLocation(t,r[0][u])}},Z=function(t,e,r){for(var n in t)a.bindBuffer(a.ARRAY_BUFFER,t[n]),a.enableVertexAttribArray(e[n]),a.vertexAttribPointer(e[n],r[n],a.FLOAT,!1,0,0)},$=function(t){var e=a.createBuffer();return a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,new Float32Array(t),a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null),e},tt=function(t){var e=a.createBuffer();return a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Int16Array(t),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null),e},et=function(t,e,r,n){for(var a=[],i=[],o=[],u=[],s=0;s<3;s++)i.push(t[3*e+s]);for(var h=0;h<3;h++)o.push(t[3*r+h]);for(var c=0;c<3;c++)u.push(t[3*n+c]);return a.push(i),a.push(o),a.push(u),a},rt=function(t,e){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},nt=function(t){var e;return e=Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2),e=Math.sqrt(e)},at=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},it=function(t,e){var r=[];return r=[t[0]/e,t[1]/e,t[2]/e],r},ot=function(t){V=!0,j=[t.pageX,t.pageY],t.preventDefault()},ut=function(t){if(V){var e=i.width,r=i.height,n=1/Math.min(e,r);switch(k=[t.pageX-j[0],t.pageY-j[1]],j=[t.pageX,t.pageY],t.buttons){case 1:Y+=k[0]*n,q+=k[1]*n,Y%=1,q=Math.min(Math.max(q%1,-.25),.25)}}},st=function(){V=!1},ht=function(t){var e=t.wheelDelta;e>0?H=.8:e<0&&(H=-.8)},ct=function(){var t=[1,0,0];x+=H*=.75,x=Math.min(Math.max(x,5),20),C[2]=x,G.identity(X),G.identity(W),G.identity(K),G.rotate(Y*Math.PI*2,[0,1,0],W),G.toVecIII(t,W,t),G.rotate(q*Math.PI*2,t,K),G.multiply(W,K,X),G.toVecIII(C,X,U),G.toVecIII(N,X,O)}}]);